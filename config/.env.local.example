# Photo Tags - Local Deployment Configuration
# Copy this file to .env.local and configure the values

# =============================================================================
# Telegram Configuration
# =============================================================================
# Get your bot token from @BotFather on Telegram
TELEGRAM_TOKEN=your_telegram_bot_token_here

# =============================================================================
# RabbitMQ Configuration
# =============================================================================
# Default credentials for local RabbitMQ installation
RABBITMQ_URL=amqp://user:password@localhost:5672/

# Queue names
RABBITMQ_CONSUMER_QUEUE_GATEWAY=image_upload
RABBITMQ_PUBLISHER_QUEUE_GATEWAY=image_upload
RABBITMQ_CONSUMER_QUEUE_ANALYZER=image_upload
RABBITMQ_PUBLISHER_QUEUE_ANALYZER=metadata_generated
RABBITMQ_CONSUMER_QUEUE_PROCESSOR=metadata_generated
RABBITMQ_PUBLISHER_QUEUE_PROCESSOR=image_processed

# Connection settings
RABBITMQ_PREFETCH_COUNT=1
RABBITMQ_RECONNECT_ATTEMPTS=5
RABBITMQ_RECONNECT_DELAY=5s

# =============================================================================
# MinIO Configuration
# =============================================================================
# MinIO endpoint (do not include http://)
MINIO_ENDPOINT=localhost:9000

# MinIO credentials
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_ROOT_USER=minioadmin
MINIO_ROOT_PASSWORD=minioadmin

# MinIO settings
MINIO_USE_SSL=false
MINIO_ORIGINAL_BUCKET=original
MINIO_PROCESSED_BUCKET=processed

# MinIO timeouts
MINIO_DOWNLOAD_TIMEOUT=30s
MINIO_UPLOAD_TIMEOUT=30s
MINIO_CONNECT_ATTEMPTS=5
MINIO_CONNECT_DELAY=3s

# MinIO data directory
MINIO_DATA_DIR=$HOME/photo-tags/data/minio

# =============================================================================
# OpenRouter Configuration (for Analyzer service)
# =============================================================================
# Get your API key from https://openrouter.ai/
OPENROUTER_API_KEY=your_openrouter_api_key_here

# Model selection
# Options: openai/gpt-4o, openai/gpt-4-turbo, anthropic/claude-3-opus, etc.
OPENROUTER_MODEL=openai/gpt-4o

# Model parameters
OPENROUTER_MAX_TOKENS=500
OPENROUTER_TEMPERATURE=0.7

# Prompt for metadata generation
OPENROUTER_PROMPT="Generate title, description and keywords for this image. Return strictly in JSON format with fields 'title', 'description' and 'keywords'."

# Use OpenRouterGo adapter (optional)
USE_OPENROUTERGO_ADAPTER=false

# Model check interval
OPENROUTER_MODEL_CHECK_INTERVAL=24h

# =============================================================================
# ExifTool Configuration (for Processor service)
# =============================================================================
# Path to exiftool binary
# macOS (Homebrew): /opt/homebrew/bin/exiftool or /usr/local/bin/exiftool
# Linux: /usr/bin/exiftool
EXIFTOOL_BINARY_PATH=/usr/bin/exiftool

# Temporary directory for processing
EXIFTOOL_TEMP_DIR=$HOME/photo-tags/tmp/processor

# ExifTool timeout
EXIFTOOL_COMMAND_TIMEOUT=10s

# =============================================================================
# Gateway Service Configuration
# =============================================================================
# HTTP server port
SERVER_PORT=8080

# =============================================================================
# Worker Configuration
# =============================================================================
# Number of concurrent workers
WORKER_CONCURRENCY=3

# Maximum number of retries for failed tasks
WORKER_MAX_RETRIES=3

# Delay between retries
WORKER_RETRY_DELAY=5s

# =============================================================================
# Logging Configuration
# =============================================================================
# Log level: debug, info, warn, error
LOG_LEVEL=info

# Log format: json, text
LOG_FORMAT=text
